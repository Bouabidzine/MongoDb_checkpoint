const MongoClient = require("mongodb").MongoClient;
const url = "mongodb://localhost:27017";
const dbName = "contact";
const client = new MongoClient(url, { useUnifiedTopology: true });
client.connect((err) => {
  if (err) {
    console.error("Failed to connect to database:", err);
    return;
  }
  console.log("connected succefully");
  const db = client.db(dbName);
  const collectionName = "contactlist";
  const collection = db.collection(collectionName);

  const documents = [
    {
      lastName: "Ben Lahmar",
      firstName: "Fares",
      email: "fares@gmail.com",
      age: "26",
    },
    {
      lastName: "Fatnassi",
      firstName: "Sarra",
      email: "sarra.f@gmail.com",
      age: "26",
    },
    {
      lastName: "Ben Yahia",
      firstName: "Rym",
      age: "4",
    },
    {
      lastName: "Cherif",
      firstName: "Sami",
      age: "3",
    },
  ];
  collection.insertMany(documents, (err, result) => {
    if (err) {
      console.error("failed to insert doc", err);
      return;
    }
  });
  db.createCollection(collectionName, (err, result) => {
    if (err) {
      console.error("failed to insert documents:", err);
      return;
    }

    console.log(`${result.insertedCount} documents inserted succefully`);
    client.close();
  });
});
